import{g as i}from"./debug-V-k-uJcK.js";const f={},d=Object.freeze(Object.defineProperty({__proto__:null,default:f},Symbol.toStringTag,{value:"Module"})),p=i(d);function n(t){if(t.charAt(0)==="/"){const r=t.split(" ");return{host:r[0],database:r[1]}}const e={};let s,l=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/\%25(\d\d)/g,"%$1"));try{s=new URL(t,"postgres://base")}catch{s=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),l=!0}for(const r of s.searchParams.entries())e[r[0]]=r[1];if(e.user=e.user||decodeURIComponent(s.username),e.password=e.password||decodeURIComponent(s.password),s.protocol=="socket:")return e.host=decodeURI(s.pathname),e.database=s.searchParams.get("db"),e.client_encoding=s.searchParams.get("encoding"),e;const a=l?"":s.hostname;e.host?a&&/^%2f/i.test(a)&&(s.pathname=a+s.pathname):e.host=decodeURIComponent(a),e.port||(e.port=s.port);const c=s.pathname.slice(1)||null;e.database=c?decodeURI(c):null,(e.ssl==="true"||e.ssl==="1")&&(e.ssl=!0),e.ssl==="0"&&(e.ssl=!1),(e.sslcert||e.sslkey||e.sslrootcert||e.sslmode)&&(e.ssl={});const o=e.sslcert||e.sslkey||e.sslrootcert?p:null;switch(e.sslcert&&(e.ssl.cert=o.readFileSync(e.sslcert).toString()),e.sslkey&&(e.ssl.key=o.readFileSync(e.sslkey).toString()),e.sslrootcert&&(e.ssl.ca=o.readFileSync(e.sslrootcert).toString()),e.sslmode){case"disable":{e.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{e.ssl.rejectUnauthorized=!1;break}}return e}var m=n;n.parse=n;export{m as p,p as r};
