import{_ as I,a as bt,b as at,c as St}from"./@babel-BnI1kD_8.js";import{R as o,r as we}from"./react-1F1He6-G.js";import{a as Et,l as it,s as _t,b as wt}from"./d3-shape-B149fNJC.js";import{f as $e,m as ot,g as lt,h as Mt,d as st,s as H,i as kt,j as Dt}from"./d3-array-AEr2eHiX.js";import{l as Nt,a as $t,b as Ae,t as Rt,u as At}from"./d3-scale-Br-m5CUe.js";import{y as Tt,i as Vt,d as Ct,h as Bt,g as Lt,f as Ke,b as Ot,o as It,a as Pt,n as Ft,l as Kt}from"./d3-time--k7HMuTs.js";import{t as jt,u as Gt}from"./d3-time-format-0_sWrf4P.js";import{R as ut}from"./react-dom-C2gNUClh.js";import{D as Wt}from"./d3-delaunay-DIed0eqA.js";function be(e){var t=o.useRef(e),n=o.useRef();return t.current=e,n.current||(n.current=function(){return t.current}),n.current}const pe=typeof window<"u"?o.useLayoutEffect:o.useEffect;function Xt(e,t){return(t==null?void 0:t.seriesId)===e.id?"focused":"none"}function Yt(e,t){var n;return e===t?"focused":(n=e.tooltipGroup)!=null&&n.some(function(r){r.seriesId===(t==null?void 0:t.seriesId)&&(r.index,t==null||t.index)})?"groupFocused":"none"}var je=["area","line","rectangle","circle"];function Re(e,t){e===void 0&&(e={}),t===void 0&&(t={}),e=zt(e,t);for(var n=0;n<je.length;n++){var r=je[n];e[r]&&t[r]&&(e[r]=Re(e[r],t))}return e}function ce(e,t){return"translate3d("+Math.round(e)+"px, "+Math.round(t)+"px, 0)"}function zt(e,t){return I({},e,{stroke:e.stroke||e.color||t.stroke||t.color,fill:e.fill||e.color||t.fill||t.color})}function Ge(e){return typeof e=="number"&&!Number.isNaN(e)}var ct=we.createContext(null);function Ht(e){var t=e.value,n=e.children;return we.createElement(ct.Provider,{value:t,children:n})}function ee(){return we.useContext(ct)()}function qt(e){var t=e.primaryAxis,n=e.secondaryAxis,r=e.series,a=ee(),i=a.getSeriesStatusStyle,s=a.getDatumStatusStyle,c=a.focusedDatumState,p=a.gridDimensions,v=c[0],l=t.isVertical?n:t,S=t.isVertical?t:n;return o.createElement("g",{style:{transform:ce(p.left,p.top)}},r.map(function(u,f){var E=i(u,v);return o.createElement("g",{key:"lines-"+f},u.datums.map(function(d,m){var _,x,y,b,h=s(d,v),M=We((_=Zt(d,t,n))!=null?_:NaN,(x=Jt(d,t,n))!=null?x:NaN,l),N=M[0],B=M[1],L=We((y=Qt(d,t,n))!=null?y:NaN,(b=Ut(d,t,n))!=null?b:NaN,S),A=L[0],$=L[1];return o.createElement("rect",{ref:function(D){d.element=D},key:m,x:N,y:A,width:B,height:$,style:I({strokeWidth:0},E,E.rectangle,h,h.rectangle)})}))}))}function Jt(e,t,n){return t.isVertical?ft(e,n):Te(e,t,n)}function Ut(e,t,n){return t.isVertical?Te(e,t,n):ft(e,n)}function dt(e,t){return Math.max(t.primaryBandScale.bandwidth(),1)}function Te(e,t,n){if(t.axisFamily==="band"){var r,a,i=n.stacked?t.scale.bandwidth():t.seriesBandScale.bandwidth();return Math.min(Math.max(i,(r=t.minBandSize)!=null?r:1),(a=t.maxBandSize)!=null?a:99999999)}return Math.max(n.stacked?t.primaryBandScale.bandwidth():t.seriesBandScale.bandwidth(),1)}function ft(e,t){var n=[vt(e,t),mt(e,t)];return Math.abs(n[1]-n[0])}function Zt(e,t,n){return t.isVertical?vt(e,n):Ve(e,t,n)}function Qt(e,t,n){return t.isVertical?Ve(e,t,n):mt(e,n)}function Ve(e,t,n){var r,a=(r=t.scale(e.primaryValue))!=null?r:NaN;if(t.axisFamily!=="band"&&(a-=dt(e,t)/2),!n.stacked){var i;a=a+((i=t.seriesBandScale(e.seriesIndex))!=null?i:NaN)}return a}function vt(e,t){var n;if(t.stacked){var r,a,i;return(r=t.scale((a=(i=e.stackData)==null?void 0:i[0])!=null?a:NaN))!=null?r:NaN}return(n=t.scale(e.secondaryValue<0?e.secondaryValue:0))!=null?n:NaN}function mt(e,t){var n;if(t.stacked){var r,a,i;return(r=t.scale((a=(i=e.stackData)==null?void 0:i[1])!=null?a:NaN))!=null?r:NaN}return(n=t.scale(e.secondaryValue<0?0:e.secondaryValue))!=null?n:NaN}function We(e,t,n){var r=n.scale.range();n.isVertical&&r.reverse();var a=function(v){return Math.max(r[0],Math.min(v,r[1]))},i=a(e),s=a(e+t),c=s-i;return[i,c]}function Xe(e){return e<0?-1:1}function Ye(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),s=(n-e._y1)/(a||r<0&&-0),c=(i*a+s*r)/(r+a);return(Xe(i)+Xe(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(c))||0}function ze(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function De(e,t,n){var r=e._x0,a=e._y0,i=e._x1,s=e._y1,c=(i-r)/3;e._context.bezierCurveTo(r+c,a+c*t,i-c,s-c*n,i,s)}function Se(e){this._context=e}Se.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:De(this,this._t0,ze(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var r=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,De(this,ze(this,r=Ye(this,t,n)),r);break;default:De(this,this._t0,r=Ye(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=r}}};Object.create(Se.prototype).point=function(e,t){Se.prototype.point.call(this,t,e)};var er=function(t){return new Se(t)};function tr(e){var t,n=e.primaryAxis,r=e.secondaryAxis,a=e.series,i=ee(),s=i.getSeriesStatusStyle,c=i.getDatumStatusStyle,p=i.focusedDatumState,v=i.gridDimensions,l=(t=r.curve)!=null?t:er,S=p[0];return o.createElement("g",{style:{transform:ce(v.left,v.top)}},a.map(function(u,f){var E,d,m=s(u,S),_=null;if(r.elementType==="area"){var x=function(k){return Ee(k,n)},y=function(k){return He(ar(k,r),r)},b=function(k){return He(_e(k,r),r)},h=Et(x,y,b).curve(l);h.defined(function($){return[x($),y($),b($)].every(Ge)}),_=h(u.datums)}var M=function(k){return Ee(k,n)},N=function(k){return _e(k,r)},B=it(M,N).curve(l);B.defined(function($){return[M($),N($)].every(Ge)});var L=(r.elementType==="area"||r.elementType==="line")&&(E=B(u.datums))!=null?E:void 0,A=(d=r.showDatumElements)!=null?d:r.elementType==="bubble"||"onFocus";return o.createElement("g",{key:"lines-"+f},_?o.createElement("path",{d:_,style:I({strokeWidth:2,opacity:.5},m,m.area)}):null,L?o.createElement("path",{d:L,style:I({strokeWidth:2},m,m.line,{fill:"none"})}):null,u.datums.map(function($,k){var D,O=c($,S),W=A==="onFocus"?$===S?4:0:2,F=A==="onFocus"?$===S:(D=r.showDatumElements)!=null?D:r.elementType==="bubble";return o.createElement("circle",{key:k,ref:function(w){$.element=w},cx:rr($,n,r)||0,cy:nr($,n,r)||0,style:I({r:W,transition:"all .3s ease-out"},m,m.circle,O,O.circle,F?{}:{opacity:0})})}))}))}function rr(e,t,n){return t.isVertical?_e(e,n):Ee(e,t)}function nr(e,t,n){return t.isVertical?Ee(e,t):_e(e,n)}function Ee(e,t){var n,r=(n=t.scale(e.primaryValue))!=null?n:NaN;return t.axisFamily==="band"&&(r+=t.scale.bandwidth()/2),r}function _e(e,t){var n;if(t.stacked){var r,a,i;return(r=t.scale((a=(i=e.stackData)==null?void 0:i[1])!=null?a:NaN))!=null?r:NaN}return(n=t.scale(e.secondaryValue))!=null?n:NaN}function ar(e,t){var n;if(t.stacked){var r,a,i;return(r=t.scale((a=(i=e.stackData)==null?void 0:i[0])!=null?a:NaN))!=null?r:NaN}return(n=t.scale(0))!=null?n:NaN}function He(e,t){var n=t.scale.range();return t.isVertical&&n.reverse(),Math.max(n[0],Math.min(e,n[1]))}function ir(e){var t,n,r,a,i,s,c,p,v,l;return I({},e,{elementType:(t=e.elementType)!=null?t:"line",minTickPaddingForRotation:(n=e.minTickPaddingForRotation)!=null?n:10,tickLabelRotationDeg:(r=e.tickLabelRotationDeg)!=null?r:60,innerBandPadding:(a=e.innerBandPadding)!=null?a:.5,outerBandPadding:(i=e.outerBandPadding)!=null?i:.2,innerSeriesBandPadding:(s=e.innerSeriesBandPadding)!=null?s:.2,outerSeriesBandPadding:(c=e.outerSeriesBandPadding)!=null?c:0,show:(p=e.show)!=null?p:!0,stacked:(v=e.stacked)!=null?v:!1,shouldNice:(l=e.shouldNice)!=null?l:!0})}function qe(e,t,n,r,a,i,s){var c=ir(t);if(!c.position)throw new Error("Chart axes must have a valid 'position' property");var p=["left","right"].indexOf(c.position)>-1,v=p?[a.height,0]:[0,a.width],l=p?[s,0]:[0,i];return c.scaleType==="time"||c.scaleType==="localTime"?or(e,c,n,r,p,v,l):c.scaleType==="linear"||c.scaleType==="log"?lr(e,c,n,r,p,v,l):c.scaleType==="band"?sr(e,c,n,p,v,l):function(){throw new Error("Invalid scale type")}()}function or(e,t,n,r,a,i,s){var c=t.scaleType==="localTime",p=c?Rt:At,v=!1;n=e?n:n.filter(function(F){return F.secondaryAxisId===t.id}),r=e?r:r.filter(function(F){return F.secondaryAxisId===t.id});var l=p(i),S=$e(r,function(F){var g=t.getValue(F.originalDatum);return F[e?"primaryValue":"secondaryValue"]=g,g}),u=S[0],f=S[1],E,d=c?{year:Tt,month:Vt,day:Ct,hour:Bt,minute:Lt,second:Ke}:{year:Ot,month:It,day:Pt,hour:Ft,minute:Kt,second:Ke};u&&f&&(d.year.count(u,f)>0||d.year.floor(f)<d.year()?E="%b %-d, %Y %-I:%M:%S.%L %p":d.month.count(u,f)>0||d.month.floor(f)<d.month()||d.day.count(u,f)>0||d.day.floor(f)<d.day()?E="%b %-d, %-I:%M:%S.%L %p":d.hour.count(u,f)>0||d.hour.floor(f)<d.hour()?E="%-I:%M:%S.%L %p":d.minute.count(u,f)>0||d.minute.floor(f)<d.minute()?E="%-I:%M:%S.%L":(d.second.count(u,f)>0||d.second.floor(f)<d.second())&&(E="%L"));var m=c?jt:Gt,_=function(g){return g.trim().replace(/(,$|^,)/,"")},x=function(g,w){return d.second(w)<w?m(g)(w):d.minute(w)<w?m(_(g.replace(/\.%L.*?(\s|$)/,"")))(w):d.hour(w)<w?m(_(g.replace(/:%S.*?(\s|$)/,"")))(w):d.day(w)<w?m(_(g.replace(/:%M.*?(\s|$)/,"")))(w):d.month(w)<w?m(_(g.replace(/%-I.*/,"")))(w):d.year(w)<w?m(_(g.replace(/%-d.*/,"")))(w):m("%Y")(w)},y=t.shouldNice;Object.prototype.toString.call(t.min)==="[object Date]"&&(u=ot([t.min,u]),y=!1),Object.prototype.toString.call(t.max)==="[object Date]"&&(f=lt([t.max,f]),y=!1),Object.prototype.toString.call(t.hardMin)==="[object Date]"&&(u=t.hardMin,y=!1),Object.prototype.toString.call(t.hardMax)==="[object Date]"&&(f=t.hardMax,y=!1),(u===void 0||f===void 0)&&(console.info("Invalid scale min/max",{options:t,series:n,range:i,values:r.map(function(F){return e?F.primaryValue:F.secondaryValue})}),v=!0),l.domain([u,f]),t.invert&&l.domain(Array.from(l.domain()).reverse()),y&&l.nice();var b=l.copy().range(s),h=e?pt(t,l,n,i):void 0,M=h?Ce(t,h,n):void 0,N=h==null?void 0:h.bandwidth();if(t.padBandRange&&N){var B=l.invert(0),L=l.invert(N),A=L.valueOf()-B.valueOf();l.domain([new Date(l.domain()[0].valueOf()-A/2),new Date(l.domain()[1].valueOf()+A/2)])}var $={},k=l.tickFormat(),D=function(g){var w,R;return(w=(R=t.formatters)==null||R.scale==null?void 0:R.scale(g,I({},$,{scale:void 0})))!=null?w:x(E,g)},O=function(g){var w,R;return(w=(R=t.formatters)==null||R.tooltip==null?void 0:R.tooltip(g,I({},$,{tooltip:void 0})))!=null?w:D(g)},W=function(g){var w,R;return(w=(R=t.formatters)==null||R.cursor==null?void 0:R.cursor(g,I({},$,{cursor:void 0})))!=null?w:D(g)};return Object.assign($,{default:k,scale:D,tooltip:O,cursor:W}),I({},t,{isInvalid:v,axisFamily:"time",isVertical:a,scale:l,range:i,outerScale:b,primaryBandScale:h,seriesBandScale:M,formatters:$})}function lr(e,t,n,r,a,i,s){var c=t.scaleType==="log"?Nt():$t(),p=!1;n=e?n:n.filter(function(A){return A.secondaryAxisId===t.id}),r=e?r:r.filter(function(A){return A.secondaryAxisId===t.id}),t.stacked&&ur(n,t);var v=t.stacked?$e(n.map(function(A){return A.datums.map(function($){var k,D=t.getValue($.originalDatum);return $[e?"primaryValue":"secondaryValue"]=D,(k=$.stackData)!=null?k:[]})}).flat(2)):$e(r,function(A){var $=t.getValue(A.originalDatum);return A[e?"primaryValue":"secondaryValue"]=$,$}),l=v[0],S=v[1],u=t.shouldNice;if(typeof t.min=="number"&&(l=ot([t.min,l]),u=!1),typeof t.max=="number"&&(S=lt([t.max,S]),u=!1),typeof t.minDomainLength=="number"&&!(l===void 0||S===void 0)){var f=Mt([l,S]),E=f+t.minDomainLength/2,d=f-t.minDomainLength/2;S=Math.max(E,S),l=Math.min(d,l)}if(typeof t.hardMin=="number"&&(l=t.hardMin,u=!1),typeof t.hardMax=="number"&&(S=t.hardMax,u=!1),l===void 0||S===void 0){var m,_;p=!0,console.info("Invalid scale min/max",{options:t,series:n,range:i,values:r.map(function(A){return e?A.primaryValue:A.secondaryValue})}),l=(m=l)!=null?m:0,S=(_=S)!=null?_:0}c.domain([l,S]),t.invert&&c.domain(Array.from(c.domain()).reverse()),c.range(i),u&&c.nice();var x=c.copy().range(s),y=e?pt(t,c,n,i):void 0,b=y?Ce(t,y,n):void 0,h=c.tickFormat(),M={},N=function($){var k,D;return(k=(D=t.formatters)==null||D.scale==null?void 0:D.scale($,I({},M,{scale:void 0})))!=null?k:h($)},B=function($){var k,D;return(k=(D=t.formatters)==null||D.tooltip==null?void 0:D.tooltip($,I({},M,{tooltip:void 0})))!=null?k:N($)},L=function($){var k,D;return(k=(D=t.formatters)==null||D.cursor==null?void 0:D.cursor($,I({},M,{cursor:void 0})))!=null?k:B($)};return Object.assign(M,{default:h,scale:N,tooltip:B,cursor:L}),I({},t,{isInvalid:p,axisFamily:"linear",isVertical:a,scale:c,range:i,outerScale:x,primaryBandScale:y,seriesBandScale:b,formatters:M})}function sr(e,t,n,r,a,i){var s,c;n=n.filter(function(y){return y.secondaryAxisId===t.id});var p=!1,v=Array.from(new Set(n.map(function(y){return y.datums}).flat().map(function(y){var b=t.getValue(y.originalDatum);return y[e?"primaryValue":"secondaryValue"]=b,b}))),l=Ae(v,a).round(!1).paddingOuter((s=t.outerBandPadding)!=null?s:0).paddingInner((c=t.innerBandPadding)!=null?c:0);t.invert&&l.domain(Array.from(l.domain()).reverse());var S=l.copy().range(i),u=l,f=Ce(t,u,n),E=function(b){return b},d={},m=function(b){var h,M;return(h=(M=t.formatters)==null||M.scale==null?void 0:M.scale(b,I({},d,{scale:void 0})))!=null?h:E(b)},_=function(b){var h,M;return(h=(M=t.formatters)==null||M.tooltip==null?void 0:M.tooltip(b,I({},d,{tooltip:void 0})))!=null?h:m(b)},x=function(b){var h,M;return(h=(M=t.formatters)==null||M.cursor==null?void 0:M.cursor(b,I({},d,{cursor:void 0})))!=null?h:_(b)};return Object.assign(d,{default:E,scale:m,tooltip:_,cursor:x}),I({},t,{isInvalid:p,axisFamily:"band",isVertical:r,scale:l,range:a,outerScale:S,formatters:d,primaryBandScale:u,seriesBandScale:f})}function ur(e,t){for(var n,r=Object.keys(e),a=_t().keys(r).value(function(l,S,u){var f,E,d=(f=e[Number(S)])==null||(E=f.datums[u])==null?void 0:E.originalDatum,m=typeof d<"u"?t.getValue(d):0;return typeof m>"u"||m===null?0:m}).offset((n=t.stackOffset)!=null?n:wt),i=a(Array.from({length:e.sort(function(l,S){return S.datums.length-l.datums.length})[0].datums.length})),s=0;s<i.length;s++)for(var c=i[s],p=0;p<c.length;p++){var v=c[p];e[s].datums[p]&&(v.data=e[s].datums[p],e[s].datums[p].stackData=v)}}function pt(e,t,n,r){var a,i,s=Math.max.apply(Math,r),c=Math.max.apply(Math,r);(function(){for(var l=0;l<n.length;l++)for(var S=n[l],u=0;u<S.datums.length;u++)for(var f,E=S.datums[u],d=t((f=E.primaryValue)!=null?f:NaN),m=0;m<S.datums.length;m++){var _,x=S.datums[m],y=t((_=x.primaryValue)!=null?_:NaN);if(d!==y){var b=Math.abs(Math.max(d,y)-Math.min(d,y));if(b<s&&(s=Math.max(b,c),s===c))return}}})();var p=st(c/s),v=Ae(p,r).round(!1).paddingOuter((a=e.outerBandPadding)!=null?a:0).paddingInner((i=e.innerBandPadding)!=null?i:0);return v}function Ce(e,t,n){var r,a,i=st(n.length),s=Ae(i,[0,t.bandwidth()]).round(!1).paddingOuter((r=e.outerSeriesBandPadding)!=null?r:e.outerBandPadding?e.outerBandPadding/2:0).paddingInner((a=e.innerSeriesBandPadding)!=null?a:e.innerBandPadding?e.innerBandPadding/2:0),c=function(v){var l;return s((l=n.find(function(S){return S.index===v}))==null?void 0:l.indexPerAxis)};return Object.assign(c,s)}var Ne=function(t){var n=t.getBoundingClientRect();return{top:Math.round(n.top),right:Math.round(n.right),bottom:Math.round(n.bottom),left:Math.round(n.left),width:Math.round(n.width),height:Math.round(n.height),x:Math.round(n.x),y:Math.round(n.y)}};function cr(e){var t=e.axis,n=e.elRef,r=e.gridDimensions,a=e.setShowRotated,i=ee(),s=i.axisDimensionsState,c=s[0],p=s[1],v=o.useMemo(function(){var u;return(u=c[t.position])==null?void 0:u[t.id]},[c,t.position,t.id]),l=o.useCallback(function(){var u;if(n.current){var f=t.isVertical?r.height:r.width,E=Array.from(n.current.querySelectorAll(".Axis-Group.outer .tickLabel")).map(function(x){return Ne(x)}),d;E.forEach(function(x){var y,b=(y=d)!=null?y:{width:0};x.width>0&&x.width>b.width&&(d=x)});var m=f;E.length>1&&E.forEach(function(x,y){var b=E[y-1];b&&(m=Math.min(m,t.isVertical?x.top-b.top:x.left-b.left))});var _=(((u=d)==null?void 0:u.width)||0)+t.minTickPaddingForRotation>m;t.isVertical||a(_)}},[n,t.isVertical,t.minTickPaddingForRotation,r.width,r.height,a]),S=o.useCallback(function(){if(!n.current){v&&p(function(x){var y,b,h=I({},(y=x[t.position])!=null?y:{});return delete h[t.id],I({},x,(b={},b[t.position]=h,b))});return}var u={width:0,height:0,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},f=n.current,E=f.querySelector(".Axis-Group.inner .domainAndTicks"),d=f.querySelector(".Axis-Group.inner .domain");if(!(!E||!d)){var m=Ne(E),_=Ne(d);!m||!_||(t.isVertical?(u.paddingTop=Math.round(Math.max(0,_.top-(m==null?void 0:m.top))),u.paddingBottom=Math.round(Math.max(0,(m==null?void 0:m.bottom)-_.bottom)),u.width=m==null?void 0:m.width):(u.paddingLeft=Math.round(Math.max(0,_.left-(m==null?void 0:m.left))),u.paddingRight=Math.round(Math.max(0,(m==null?void 0:m.right)-_.right)),u.height=m==null?void 0:m.height),(!c||!v||Object.keys(u).some(function(x){return u[x]!==v[x]}))&&p(function(x){var y,b,h;return I({},x,(h={},h[t.position]=I({},(y=x[t.position])!=null?y:{},(b={},b[t.id]=u,b)),h))}))}},[t.id,t.isVertical,t.position,v,c,n,p]);pe(function(){window.requestAnimationFrame(function(){l(),S()})},[l])}function dr(e){var t=o.useState(!1),n=t[0],r=t[1],a=ee(),i=a.getOptions,s=a.gridDimensions,c=a.width,p=a.height,v=i(),l=v.dark,S=v.showDebugAxes,u=o.useRef(null);cr({axis:e,elRef:u,gridDimensions:s,showRotated:n,setShowRotated:r});var f=function(d){var m=!d&&n,_=d?e.outerScale:e.scale,x=_.range(),y=x[0],b=x[1],h=function(){var D=e;if(D.outerScale.ticks){if(typeof D.tickCount=="number")return D.outerScale.ticks(D.tickCount);var O=D.isVertical?40:80,W=D.outerScale.range(),F=Math.abs(W[1]-W[0])/O;return D.outerScale.ticks(F)}return D.outerScale.domain()},M=d?p:s.height,N=d?c:s.width,B=e.position==="left"?[{x:0,y},{x:0,y:b}]:e.position==="right"?[{x:N,y},{x:N,y:b}]:e.position==="top"?[{x:y,y:0},{x:b,y:0}]:[{x:y,y:M},{x:b,y:M}],L=B[0],A=B[1],$=h().map(function(k){var D=fr(_,k),O=e.position==="left"?[{x:0,y:D},{x:-8,y:D},{x:N,y:D}]:e.position==="right"?[{x:N,y:D},{x:N+8,y:D},{x:0,y:D}]:e.position==="top"?[{x:D,y:0},{x:D,y:-8},{x:D,y:M}]:[{x:D,y:M},{x:D,y:M+8},{x:D,y:0}],W=O[0],F=O[1],g=O[2];return{value:k,from:W,to:F,gridTo:g}});return o.createElement("g",{key:"Axis-Group "+(d?"outer":"inner"),className:"Axis-Group "+(d?"outer":"inner"),style:{transform:d?void 0:ce(s.left,s.top)}},o.createElement("g",{className:"Axis",style:I({},d?{opacity:S?.5:0,pointerEvents:"none"}:{opacity:1,pointerEvents:"all"})},o.createElement("g",{className:"domainAndTicks"},o.createElement("line",{className:"domain",x1:L.x,y1:L.y,x2:A.x,y2:A.y,stroke:l?"rgba(255,255,255, .2)":"rgba(0,0,0, .2)"}),$.map(function(k,D){var O=k.to,W=O.x,F=O.y;return e.position==="top"?F-=5:e.position==="bottom"?F+=5:e.position==="left"?W-=5:e.position==="right"&&(W+=5),o.createElement("g",{key:"vx-tick-"+k+"-"+D,className:"tick"},d?null:o.createElement("line",{x1:k.from.x,y1:k.from.y,x2:k.to.x,y2:k.to.y,stroke:l?"rgba(255,255,255, .2)":"rgba(0,0,0, .2)"}),o.createElement("text",{className:"tickLabel",style:{fontSize:10,fill:l?"rgba(255,255,255, .7)":"rgba(0,0,0, .7)",dominantBaseline:m?"central":e.position==="bottom"?"hanging":e.position==="top"?"alphabetic":"central",textAnchor:m?"end":e.position==="right"?"start":e.position==="left"?"end":"middle"},transform:"translate("+W+", "+F+") rotate("+(m?e.position==="top"?60:-60:0)+")"},e.formatters.scale(k.value)))})),o.createElement("g",{className:"grid"},$.map(function(k,D){var O;return o.createElement("g",{key:"vx-tick-"+k+"-"+D,className:"tick"},((O=e.showGrid)==null||O)&&!d?o.createElement("line",{x1:k.from.x,y1:k.from.y,x2:k.gridTo.x,y2:k.gridTo.y,stroke:l?"rgba(255,255,255, .05)":"rgba(0,0,0, .05)"}):null)}))))};return e.show?o.createElement("g",{ref:u},f(!1),f(!0)):null}function fr(e,t){var n,r=(n=e(t))!=null?n:NaN;return e.bandwidth?r+e.bandwidth()/2:r}function ht(e){var t=o.useRef();return pe(function(){t.current=e},[e]),t.current}function U(e,t){t===void 0&&(t=!0);var n=o.useRef(t?e:null);return t&&(n.current=e),n.current}function gt(){var e=we.useState(),t=e[0],n=e[1];return pe(function(){if(!t){var r=document.getElementById("react-charts-portal");r||(r=document.createElement("div"),r.setAttribute("id","react-charts-portal"),Object.assign(r.style,{pointerEvents:"none",position:"fixed",left:0,right:0,top:0,bottom:0,"z-index":99999999999}),document.body.append(r)),n(r)}}),t}function me(e,t){var n=o.useReducer(function(){return{}},[])[1],r=o.useRef({width:0,height:0,x:0,y:0,left:0,top:0,right:0,bottom:0}),a=o.useCallback(function(){e&&(r.current=e.getBoundingClientRect())},[e]);return r.current||a(),o.useEffect(function(){if(!(!e||!t)){var i=function(){a(),n()};return document.addEventListener("scroll",i,!0),function(){document.removeEventListener("scroll",i,!0)}}},[e,t,a,n]),o.useEffect(function(){if(!(!e||!t)){a(),n();var i=new ResizeObserver(function(){a(),n()});return i.observe(e),function(){i.unobserve(e)}}},[e,t,a,n]),r.current}var Je=.001;function yt(e,t){return Number.isNaN(e)&&Number.isNaN(t)?!0:e>t-Je&&e<t+Je}function se(e){return yt(e,0)}var vr=function(){function e(n,r,a,i){this._m=r,this._k=a,this._c=i,this._solution=null,this.endPosition=n,this._startTime=0}var t=e.prototype;return t.x=function(r){return r===void 0&&(r=(new Date().getTime()-this._startTime)/1e3),this._solution?this.endPosition+this._solution.x(r):this.endPosition},t.dx=function(r){return r===void 0&&(r=(new Date().getTime()-this._startTime)/1e3),this._solution?this._solution.dx(r):0},t.setEnd=function(r){var a=new Date().getTime(),i=0,s=this.endPosition;this._solution&&(se(i)&&(i=this._solution.dx((a-this._startTime)/1e3)),s=this._solution.x((a-this._startTime)/1e3),se(i)&&(i=0),se(s)&&(s=0),s+=this.endPosition),!(this._solution&&se(s-r)&&se(i))&&(this.endPosition=r,this._solution=this._solve(s-this.endPosition,i),this._startTime=a)},t.snap=function(r){this._startTime=new Date().getTime(),this.endPosition=r,this._solution={x:function(){return 0},dx:function(){return 0}}},t.done=function(){return yt(this.x(),this.endPosition)&&se(this.dx())},t._solve=function(r,a){var i=this._c,s=this._m,c=this._k,p=i*i-4*s*c;if(p===0){var v=-i/(2*s),l=r,S=a/(v*r);return{x:function(h){return(l+S*h)*Math.pow(Math.E,v*h)},dx:function(h){var M=Math.pow(Math.E,v*h);return v*(l+S*h)*M+S*M}}}else if(p>0){var u=(-i-Math.sqrt(p))/(2*s),f=(-i+Math.sqrt(p))/(2*s),E=(a-u*r)/(f-u),d=r-E;return{x:function(h){return d*Math.pow(Math.E,u*h)+E*Math.pow(Math.E,f*h)},dx:function(h){return d*u*Math.pow(Math.E,u*h)+E*f*Math.pow(Math.E,f*h)}}}else{var m=Math.sqrt(4*s*c-i*i)/(2*s),_=-(i/2*s),x=r,y=(a-_*r)/m;return{x:function(h){return Math.pow(Math.E,_*h)*(x*Math.cos(m*h)+y*Math.sin(m*h))},dx:function(h){var M=Math.pow(Math.E,_*h),N=Math.cos(m*h),B=Math.sin(m*h);return M*(y*m*N-x*m*B)+_*M*(y*B+x*N)}}}},e}();function ue(e,t,n,r,a){var i=o.useRef(bt(vr,[e].concat(t))),s=be(e),c=mr(function(){return n(i.current.x()),i.current.done()}),p=c[0],v=c[1],l=o.useRef(),S=l.current!==e;return o.useEffect(function(){if(S){if(r){i.current.snap(s()),p();return}i.current.setEnd(e),p()}l.current=e}),o.useEffect(function(){return function(){v()}},[v]),i.current}function mr(e){var t=o.useRef(null),n=o.useRef(e);n.current=e;var r=o.useCallback(function(){n.current()||(t.current=requestAnimationFrame(r))},[]);return[o.useMemo(function(){return r},[r]),o.useMemo(function(){return function(){return t.current&&cancelAnimationFrame(t.current)}},[])]}var pr=function(t,n){return t?"rgba(255,255,255,"+(n>4?.15:.3)+")":"rgba(0, 26, 39, "+(n>4?.15:.3)+")"},Ue=function(t){return t?"rgba(255,255,255,.9)":"rgba(0, 26, 39, 0.9)"};function Ze(e){var t,n,r;return I({},e,{show:(t=e.show)!=null?t:!0,showLine:(n=e.showLine)!=null?n:!0,showLabel:(r=e.showLabel)!=null?r:!0})}function hr(){var e,t,n=ee(),r=n.getOptions,a=(e=r().primaryCursor)!=null?e:!0,i=(t=r().secondaryCursor)!=null?t:!0,s=o.useMemo(function(){return Ze(a?typeof a=="boolean"?{}:a:{show:!1})},[a]),c=o.useMemo(function(){return Ze(i?typeof i=="boolean"?{}:i:{show:!1})},[i]);return o.createElement(o.Fragment,null,s.show&&o.createElement(Qe,{primary:!0,options:s}),c.show&&o.createElement(Qe,{options:c}))}function Qe(e){var t,n,r,a,i,s,c,p=ee(),v=p.getOptions,l=p.svgRef,S=p.gridDimensions,u=p.focusedDatumState,f=p.primaryAxis,E=p.secondaryAxes,d=be(e.options),m=u[0],_=U(m,!!m),x=(t=E.find(function(le){return le.id===(_==null?void 0:_.secondaryAxisId)}))!=null?t:E[0],y=e.primary?f:x,b=e.primary?x:f,h=function(xe){var Fe;return xe?y.stacked?(Fe=xe.stackData)==null?void 0:Fe[1]:e.primary?xe.primaryValue:xe.secondaryValue:void 0},M=h(m);o.useEffect(function(){var le;(le=d())==null||le.onChange==null||le.onChange(M)},[d,M]);var N=(n=e.options.value)!=null?n:M,B=U(e.options.value,e.options.value!=null),L=U(h(_),h(_)!=null),A=B??L,$=b.scale.range(),k,D,O,W,F,g,w,R,V=y.axisFamily==="band"?y.scale.bandwidth():1,j=typeof N<"u"&&!Number.isNaN(N),P=y.scale(N);if(y.isVertical){var C,T;D=P,F=((C=D)!=null?C:0)-1,g=((T=D)!=null?T:0)+V,y.position==="left"?(O=$[0],W=$[1]):(O=$[1],W=$[0])}else{var G,Y;k=P,O=((G=k)!=null?G:0)-1,W=((Y=k)!=null?Y:0)+V,y.position==="top"?(F=$[0],g=$[1]):(F=$[1],g=$[0])}var z=Math.min(O,W),K=Math.min(F,g),re=Math.max(O,W),q=Math.max(F,g),ae=Math.max(q-K,0),ie=Math.max(re-z,0),J,Z;y.isVertical?(y.position==="left"?J=z:J=re,Z=K+ae/2):(y.position==="top"?Z=K:Z=q,J=z+ie/2),y.isVertical?(R=-50,y.position==="left"?w=-100:w=0):(w=-50,y.position==="top"?R=-100:R=0);var he=y.formatters.cursor(A),de=me(l.current,j),ne=o.useRef(null),te=o.useRef(null),Me=U(z,P!=null),ge=U(K,P!=null),ye=U(J,P!=null),fe=U(Z,P!=null),ke=ht(P),Q=ke==null&&P!==null;z=(r=P!=null?z:Me)!=null?r:NaN,K=(a=P!=null?K:ge)!=null?a:NaN,J=(i=P!=null?J:ye)!=null?i:NaN,Z=(s=P!=null?Z:fe)!=null?s:NaN;var Be=ue(z,[1,210,20],function(){ne.current&&(ne.current.style.transform="translate("+Be.x()+"px, "+Le.x()+"px)")},Q),Le=ue(K,[1,210,20],function(){ne.current&&(ne.current.style.transform="translate("+Be.x()+"px, "+Le.x()+"px)")},Q),Oe=ue(J,[1,210,20],function(){te.current&&(te.current.style.transform="translate("+Oe.x()+"px, "+Ie.x()+"px)")},Q),Ie=ue(Z,[1,210,20],function(){te.current&&(te.current.style.transform="translate("+Oe.x()+"px, "+Ie.x()+"px)")},Q),Pe=gt();return Pe?ut.createPortal(o.createElement("div",{style:{fontFamily:"sans-serif",pointerEvents:"none",position:"absolute",top:0,left:0,transform:ce(de.left+S.left,de.top+S.top),opacity:j?1:0,transition:"opacity .3s ease"},className:"Cursor"},e.options.showLine?o.createElement("div",{ref:ne,style:{width:ie+"px",height:ae+"px",position:"absolute",top:0,left:0,background:pr((c=v().dark)!=null?c:!1,V)}}):null,e.options.showLabel?o.createElement("div",{ref:te,style:{position:"absolute",top:0,left:0}},o.createElement("div",{style:{padding:"5px",fontSize:"10px",background:Ue(v().dark),color:Ue(!v().dark),borderRadius:"3px",position:"relative",transform:"translate3d("+w+"%, "+R+"%, 0)",whiteSpace:"nowrap"}},he)):null),Pe):null}var gr={left:{side:"left",startKey:"left",lengthKey:"width",crossStartKey:"top",crossLengthKey:"height",fromEnd:!1},right:{side:"right",startKey:"left",lengthKey:"width",crossStartKey:"top",crossLengthKey:"height",fromEnd:!0},top:{side:"top",startKey:"top",lengthKey:"height",crossStartKey:"left",crossLengthKey:"width",fromEnd:!1},bottom:{side:"bottom",startKey:"top",lengthKey:"height",crossStartKey:"left",crossLengthKey:"width",fromEnd:!0}};function yr(e){var t=me(e.portalEl,e.show),n=me(e.anchorEl,e.show),r=me(e.tooltipEl,e.show),a=o.useMemo(function(){var c=Array.isArray(e.side)?e.side:[e.side];return c.map(function(p){var v=p.split(" "),l=v[0],S=v[1],u=S===void 0?"center":S,f=!["top","right","bottom","left"].find(function(d){return l===d});if(f)throw new Error('react-sticker: "'+l+`" is not a valid side! Must be one of ['top', 'right', 'bottom', 'left'].`);var E=!["center","start","end","top","right","bottom","left"].find(function(d){return u===d});if(E)throw new Error('react-sticker: "'+u+`" is not a valid side-alignment! Must be one of ['center', 'start', 'end', 'top', 'right', 'bottom', 'left'].`);return[l,u]})},[JSON.stringify(e.side)]),i=t&&r&&n,s=o.useMemo(function(){return i&&e.show?xr({portalDims:t,tooltipDims:r,anchorDims:n,sides:a,useLargest:e.useLargest}):null},[n,e.show,e.useLargest,t,i,a,r]);return{fit:s,style:I({position:"absolute",visibility:i?"visible":"hidden"},s==null?void 0:s.style)}}function xr(e){var t=e.portalDims,n=e.tooltipDims,r=e.anchorDims,a=e.sides,i=e.useLargest,s=a.map(function(c){var p=c[0],v=c[1];return br(I({},gr[p],{align:v,portalDims:t,tooltipDims:n,anchorDims:r}))});return i?(s.sort(function(c,p){return p.fitRatio-c.fitRatio}),s[0]):s.find(function(c){return c.fitRatio>=1})||s[0]}function br(e){var t,n=e.side,r=e.align,a=e.startKey,i=e.lengthKey,s=e.crossStartKey,c=e.crossLengthKey,p=e.fromEnd,v=e.portalDims,l=e.tooltipDims,S=e.anchorDims,u=v[a],f=v[i],E=v[s],d=v[c],m=S[a]-v[a],_=S[i],x=S[s],y=S[c],b=S[c],h=l[i],M=l[c],N,B;p?(N=m+_,B=(f-(m+_))/h):(N=m-h,B=Math.min(m/h)),N=Math.max(u,Math.min(N,f));var L;return a==="left"?r==="top"?r="start":r==="bottom"&&(r="end"):r==="left"?r="start":r==="right"&&(r="end"),["start","center","end"].includes(r)||(r="center"),r==="start"?L=x:r==="end"?L=x+b-M:L=x+y/2-M/2,L=Math.max(E,Math.min(L,d-M)),{side:n,align:r,startKey:a,lengthKey:i,crossStartKey:s,crossLengthKey:c,fromEnd:p,portalDims:v,tooltipDims:l,anchorDims:S,fitRatio:B,style:(t={},t[a]=N,t[s]=L,t)}}var Sr=10,X=7,et=function(t){return t?"rgba(255,255,255,.9)":"rgba(0, 26, 39, 0.9)"};function Er(e){return o.createElement(_r,e)}function _r(e){var t,n,r,a=U(e.anchor.fit,!!e.anchor.fit);if(!e.focusedDatum)return null;var i=e.primaryAxis,s=e.secondaryAxis,c=e.getDatumStyle,p=e.focusedDatum,v=e.secondaryAxes,l=e.getOptions(),S=l.tooltip,u=l.dark,f=((t=(n=e.focusedDatum)==null?void 0:n.tooltipGroup)!=null?t:[]).filter(function(A){var $;return($=S.showDatumInTooltip==null?void 0:S.showDatumInTooltip(A))!=null?$:!0}),E=Sr,d=f.length,m=f.findIndex(function(A){return A===p}),_=m>-1?m-E/2:0;_=Math.max(_,0);var x=m>-1?_+E:d;x=Math.min(x,d),_=Math.max(x-E,0);var y=f.slice(_,x),b=_>0,h=x<d,M=(a==null?void 0:a.side)+"-"+(a==null?void 0:a.align),N,B;N||(M==="left-center"?N="right":M==="right-center"?N="left":M==="top-center"?N="bottom":M==="bottom-center"?N="top":M==="right-start"?N="bottomLeft":M==="right-end"?N="topLeft":M==="left-start"?N="bottomRight":M==="left-end"&&(N="topRight"));var L=et(u);return N==="bottom"?B={top:"100%",left:"50%",transform:"translate3d(-50%, 0%, 0)",borderLeft:X*.8+"px solid transparent",borderRight:X*.8+"px solid transparent",borderTop:X+"px solid "+L}:N==="top"?B={top:"0%",left:"50%",transform:"translate3d(-50%, -100%, 0)",borderLeft:X*.8+"px solid transparent",borderRight:X*.8+"px solid transparent",borderBottom:X+"px solid "+L}:N==="right"?B={top:"50%",left:"100%",transform:"translate3d(0%, -50%, 0)",borderTop:X*.8+"px solid transparent",borderBottom:X*.8+"px solid transparent",borderLeft:X+"px solid "+L}:N==="left"?B={top:"50%",left:"0%",transform:"translate3d(-100%, -50%, 0)",borderTop:X*.8+"px solid transparent",borderBottom:X*.8+"px solid transparent",borderRight:X+"px solid "+L}:N==="topRight"?B={top:"0%",left:"100%",transform:"translate3d(-50%, -50%, 0) rotate(-45deg)",borderTop:X*.8+"px solid transparent",borderBottom:X*.8+"px solid transparent",borderLeft:X*2+"px solid "+L}:N==="bottomRight"?B={top:"100%",left:"100%",transform:"translate3d(-50%, -50%, 0) rotate(45deg)",borderTop:X*.8+"px solid transparent",borderBottom:X*.8+"px solid transparent",borderLeft:X*2+"px solid "+L}:N==="topLeft"?B={top:"0%",left:"0%",transform:"translate3d(-50%, -50%, 0) rotate(45deg)",borderTop:X*.8+"px solid transparent",borderBottom:X*.8+"px solid transparent",borderRight:X*2+"px solid "+L}:N==="bottomLeft"?B={top:"100%",left:"0%",transform:"translate3d(-50%, -50%, 0) rotate(-45deg)",borderTop:X*.8+"px solid transparent",borderBottom:X*.8+"px solid transparent",borderRight:X*2+"px solid "+L}:B={opacity:0},o.createElement("div",{style:{position:"relative",fontSize:"10px",padding:"5px",background:et(u),color:u?"black":"white",borderRadius:"3px"}},o.createElement("div",{style:I({position:"absolute",width:0,height:0},B)}),o.createElement("div",null,o.createElement("div",{style:{marginBottom:"3px",textAlign:"center"}},S.groupingMode==="series"?o.createElement("strong",null,p.seriesLabel):S.groupingMode==="secondary"?o.createElement("strong",null,s.formatters.tooltip(p.secondaryValue)):o.createElement("strong",null,i.formatters.tooltip(p.primaryValue))),o.createElement("table",{style:{whiteSpace:"nowrap"}},o.createElement("tbody",null,b?o.createElement("tr",{style:{opacity:.8}},o.createElement("td",null),o.createElement("td",null,"..."),o.createElement("td",null)):null,y.map(function(A,$){var k=A===p,D=v.find(function(O){return O.id===A.secondaryAxisId});return o.createElement("tr",{key:$,style:{opacity:k?1:.8,fontWeight:k?"bold":void 0}},o.createElement("td",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},o.createElement("svg",{width:"14",height:"14"},o.createElement("circle",{cx:"7",cy:"7",r:"5",style:I({},c(A),{stroke:u?"black":"white",strokeWidth:k?2:1})}))),S.groupingMode==="series"?o.createElement(o.Fragment,null,o.createElement("td",null,i.formatters.tooltip(A.primaryValue),":  "),o.createElement("td",{style:{textAlign:"right"}},D.formatters.tooltip(A.secondaryValue))):S.groupingMode==="secondary"?o.createElement(o.Fragment,null,o.createElement("td",null,A.seriesLabel,":  "),o.createElement("td",{style:{textAlign:"right"}},i.formatters.tooltip(A.primaryValue))):o.createElement(o.Fragment,null,o.createElement("td",null,A.seriesLabel,":  "),o.createElement("td",{style:{textAlign:"right"}},D.formatters.tooltip(A.secondaryValue))))}),h?o.createElement("tr",{style:{opacity:.8}},o.createElement("td",null),o.createElement("td",null,"..."),o.createElement("td",null)):null,((r=p.tooltipGroup)!=null?r:[]).length>1?e.secondaryAxes.filter(function(A){return A.stacked}).map(function(A,$){var k,D;return o.createElement("tr",{key:A.id+"_"+$},o.createElement("td",{style:{paddingTop:"5px"}},o.createElement("div",{style:{width:"12px",height:"12px",backgroundColor:u?"rgba(0, 26, 39, 0.3)":"rgba(255,255,255,.2)",borderRadius:"50px"}})),o.createElement("td",{style:{paddingTop:"5px"}},e.secondaryAxes.length>1?(k=A.id)!=null?k:"Axis "+($+1)+" ":"","Total:  "),o.createElement("td",{style:{paddingTop:"5px"}},A.formatters.scale(H((D=p.tooltipGroup)!=null?D:[],function(O){return O.secondaryValue}))))}):null))))}var wr=["visibility"];function Mr(e){var t,n,r,a,i,s;return e===void 0&&(e={}),e===!0?e={show:!0}:e===!1&&(e={show:!1}),I({show:!0},e,{align:(t=e.align)!=null?t:"auto",alignPriority:(n=e.alignPriority)!=null?n:["right","topRight","bottomRight","left","topLeft","bottomLeft","top","bottom"],padding:(r=e.padding)!=null?r:5,arrowPadding:(a=e.arrowPadding)!=null?a:7,render:(i=e.render)!=null?i:Er,showDatumInTooltip:(s=e.showDatumInTooltip)!=null?s:function(){return!0}})}function kr(){var e,t,n=ee(),r=n.focusedDatumState,a=n.getOptions,i=n.primaryAxis,s=n.secondaryAxes,c=n.getDatumStatusStyle,p=n.svgRef,v=r[0],l=U(v,!!v),S=(e=s.find(function(D){return D.id===(l==null?void 0:l.secondaryAxisId)}))!=null?e:s[0],u=gt(),f=o.useState(),E=f[0],d=f[1],m=me(p.current,!!(v!=null&&v.element)),_=o.useMemo(function(){var D,O,W,F,g,w,R=(D=l==null||(O=l.element)==null?void 0:O.getBoundingClientRect())!=null?D:null;if(!R)return null;if(m){var V=(W=R.left)!=null?W:0,j=(F=R.top)!=null?F:0,P=(g=R.width)!=null?g:0,C=(w=R.height)!=null?w:0,T=document.createElement("div");return T.getBoundingClientRect=function(){return{x:V,y:j,width:P,height:C,top:j,left:V,bottom:j+P,right:V+C}},T}},[l==null?void 0:l.element,m]),x=yr({show:!!v,portalEl:u,anchorEl:_,tooltipEl:E,side:["right","left","top","bottom"]}),y=ht(x),b=(t=U(x,!!x.fit))!=null?t:x,h=b.style;h.visibility;var M=at(h,wr),N=o.useRef(null),B=Number.isNaN(y==null?void 0:y.style.left),L=ue(M.left||0,[1,210,30],function(){N.current&&(N.current.style.transform="translate("+L.x()+"px, "+A.x()+"px)")},B),A=ue(M.top||0,[1,210,30],function(){N.current&&(N.current.style.transform="translate("+L.x()+"px, "+A.x()+"px)")},B),$=a().tooltip.show,k=U(x.fit,!!x.fit);return $&&u?ut.createPortal(o.createElement("div",{ref:N,style:{position:M.position,opacity:v?1:0,transition:"opacity .3s ease"}},o.createElement("div",{ref:function(O){return d(O)},style:I({fontFamily:"sans-serif"},(k==null?void 0:k.startKey)==="left"?{padding:"0 10px"}:{padding:"10px 0"})},a().tooltip.render({getOptions:a,focusedDatum:l,primaryAxis:i,secondaryAxes:s,secondaryAxis:S,getDatumStyle:function(O){return c(O,v)},anchor:x}))),u):null}function Dr(){var e=ee(),t=e.getOptions,n=e.focusedDatumState,r=e.isInteractingState,a=n[1],i=r[0],s=t(),c=s.onFocusDatum,p=s.onClickDatum,v=s.tooltip,l=s.primaryCursor,S=s.secondaryCursor,u=s.showVoronoi,f=s.interactionMode,E=o.useCallback(function(_){var x,y;(x=(y=t()).onFocusDatum)==null||x.call(y,_),a(_)},[t,a]),d=i&&(u||c||p||v||l||S);if(!d)return null;var m={handleFocus:E};return f==="closest"?o.createElement(Rr,m):o.createElement(Nr,m)}function Nr(e){var t=e.handleFocus,n=ee(),r=n.primaryAxis,a=n.secondaryAxes,i=n.getOptions,s=n.gridDimensions,c=n.datumsByInteractionGroup,p=a.length===1&&a[0].stacked,v=a.every(function(l){return l.elementType==="bar"&&!l.stacked});return o.useMemo(function(){var l=Array.from(c.entries()).map(function(u){u[0];var f=u[1];return f}).filter(function(u){var f=u[0];if(f){var E=f.primaryValue;return E!=="undefined"&&E!==null}}).sort(function(u,f){var E=a.find(function(x){return x.id===u[0].secondaryAxisId}),d=a.find(function(x){return x.id===f[0].secondaryAxisId}),m=oe(u[0],r,E,v),_=oe(f[0],r,d,v);return m-_});r.isVertical&&l.reverse();var S=l.map(function(u,f,E){var d,m=u[0],_=E[f-1],x=E[f+1],y=a.find(function(k){return k.id===m.secondaryAxisId}),b=oe(m,r,y,v),h=(d=r==null?void 0:r.scale.range())!=null?d:[0,0],M=h[0],N=h[1];if(_){var B=a.find(function(k){return k.id===_[0].secondaryAxisId}),L=oe(_[0],r,B,v);M=b-(b-L)/2}if(x){var A=a.find(function(k){return k.id===x[0].secondaryAxisId}),$=oe(x[0],r,A,v);N=b+($-b)/2}return{primaryStart:M,primaryEnd:N,primaryPx:b,datumBoundaries:u.filter(function(k){var D=k.secondaryValue;return typeof D<"u"&&D!==null}).map(function(k,D,O){var W,F,g,w=O[D-1],R=O[D+1],V=a.find(function(Q){return Q.id===k.secondaryAxisId});if(p){var j,P,C,T=(j=V==null?void 0:V.scale.range())!=null?j:[0,0],G=[(P=k.stackData)==null?void 0:P[0],(C=k.stackData)==null?void 0:C[1]];V!=null&&V.isVertical&&(T.reverse(),G.reverse());var Y=T[0],z=T[1];if(w){var K,re;Y=(K=V==null?void 0:V.scale((re=G[0])!=null?re:NaN))!=null?K:NaN}if(R){var q,ae;z=(q=V==null?void 0:V.scale((ae=G[1])!=null?ae:NaN))!=null?q:NaN}return{secondaryStart:Y,secondaryEnd:z,datum:k}}var ie=(W=V==null?void 0:V.scale(V.stacked?(F=k.stackData)==null?void 0:F[1]:k.secondaryValue))!=null?W:NaN,J=(g=V==null?void 0:V.scale.range())!=null?g:[0,0];V!=null&&V.isVertical&&J.reverse();var Z=J[0],he=J[1];if(w){var de,ne,te=a.find(function(Q){return Q.id===(w==null?void 0:w.secondaryAxisId)}),Me=(de=te==null?void 0:te.scale(te.stacked?(ne=w.stackData)==null?void 0:ne[1]:w.secondaryValue))!=null?de:NaN;Z=ie-(ie-Me)/2}if(R){var ge,ye,fe=a.find(function(Q){return Q.id===(R==null?void 0:R.secondaryAxisId)}),ke=(ge=fe==null?void 0:fe.scale(fe.stacked?(ye=R.stackData)==null?void 0:ye[1]:R.secondaryValue))!=null?ge:NaN;he=ie+(ke-ie)/2}return{secondaryStart:Z,secondaryEnd:he,datum:k}})}});return o.createElement("g",{onMouseLeave:function(){return t(null)},style:{transform:ce(s.left,s.top)}},S.map(function(u,f){return o.createElement("g",{key:u.primaryPx+"_"+f},u.datumBoundaries.map(function(E,d){var m=r.isVertical?E.secondaryStart:u.primaryStart,_=r.isVertical?E.secondaryEnd:u.primaryEnd,x=r.isVertical?u.primaryStart:E.secondaryStart,y=r.isVertical?u.primaryEnd:E.secondaryEnd,b=Math.min(m,_),h=Math.min(x,y),M=Math.max(m,_),N=Math.max(x,y),B=Math.max(N-h,0),L=Math.max(M-b,0);return o.createElement("rect",{key:d,x:b,y:h,width:L,height:B,className:"action-voronoi",onMouseEnter:function(){return t(E.datum)},style:{fill:i().dark?"#ffffff33":"rgba(0,0,0,0.2)",strokeWidth:1,stroke:i().dark?"white":"black",opacity:i().showVoronoi?1:0}})}))}))},[c,r,s.left,s.top,a,v,p,t,i])}var $r=it();function Rr(e){var t=e.handleFocus,n=ee(),r=n.primaryAxis,a=n.series,i=n.secondaryAxes,s=n.getOptions,c=n.gridDimensions,p=null,v=[],l=i.every(function(f){return f.elementType==="bar"&&!f.stacked});a.forEach(function(f){f.datums.filter(function(E){var d=E.primaryValue,m=E.secondaryValue;return d!=="undefined"&&d!==null&&m!=="undefined"&&m!==null}).forEach(function(E){var d=i.find(function(x){return x.id===E.secondaryAxisId}),m=Ar(E,r,d,l),_=Tr(E,r,d,l);typeof m!="number"||typeof _!="number"||Number.isNaN(_)||Number.isNaN(m)||v.push({x:m,y:_,datum:E})})});var S=Wt.from(v,function(f){return Math.max(f.x,0)},function(f){return Math.max(f.y,0)}),u=S.voronoi([0,0,c.width,c.height]);return p=u.cellPolygons(),p=Array.from(p),o.createElement("g",{onMouseLeave:function(){return t(null)},style:{transform:ce(c.left,c.top)}},p.map(function(f,E){var d=f.index,m=v[d].datum,_=$r(f)||void 0;return o.createElement("path",{key:E,d:_,className:"action-voronoi",onMouseEnter:function(){return t(m)},style:{fill:s().dark?"#ffffff33":"rgba(0,0,0,0.2)",strokeWidth:1,stroke:s().dark?"white":"black",opacity:s().showVoronoi?1:0}})}))}function Ar(e,t,n,r){return t.isVertical?xt(e,n):oe(e,t,n,r)}function Tr(e,t,n,r){return t.isVertical?oe(e,t,n,r):xt(e,n)}function oe(e,t,n,r){var a,i=(a=t.scale(e.primaryValue))!=null?a:NaN;if(r&&n.elementType==="bar")if(n.stacked)i+=dt(e,t)/2;else{var s;i+=(s=t.seriesBandScale(e.seriesIndex))!=null?s:NaN,i+=Te(e,t,n)/2}return i}function xt(e,t){var n;if(t.stacked){var r,a,i;return(r=t.scale((a=(i=e.stackData)==null?void 0:i[1])!=null?a:NaN))!=null?r:NaN}return(n=t.scale(e.secondaryValue))!=null?n:NaN}var Vr=["options","className","style"],Cr=["#0f83ab","#faa43a","#fd6868","#53cfc9","#a2d925","#decf3f","#734fe9","#cd82ad","#006d92","#de7c00","#f33232","#3f9a80","#53c200","#d7af00","#4c26c9","#d44d99"],ve=5;function Br(e){var t,n,r,a,i,s,c,p,v,l,S;return I({},e,{initialWidth:(t=e.initialWidth)!=null?t:300,initialHeight:(n=e.initialHeight)!=null?n:200,getSeriesOrder:(r=e.getSeriesOrder)!=null?r:function(u){return u},interactionMode:(a=e.interactionMode)!=null?a:"primary",showVoronoi:(i=e.showVoronoi)!=null?i:!1,defaultColors:(s=e.defaultColors)!=null?s:Cr,useIntersectionObserver:(c=e.useIntersectionObserver)!=null?c:!1,intersectionObserverRootMargin:(p=e.intersectionObserverRootMargin)!=null?p:"1000px",primaryCursor:(v=e.primaryCursor)!=null?v:!0,secondaryCursor:(l=e.secondaryCursor)!=null?l:!0,padding:(S=e.padding)!=null?S:ve})}function Yr(e){var t=e.options,n=e.className,r=e.style,a=r===void 0?{}:r,i=at(e,Vr),s=Br(t),c=o.useState(null),p=c[0],v=c[1],l=p==null?void 0:p.parentElement,S=o.useMemo(function(){var b=function h(M){if(!M)return null;var N=M.parentElement;if(!N)return null;if(N.scrollHeight>N.clientHeight){var B=window.getComputedStyle(N),L=B.overflow;if(L.includes("scroll")||L.includes("auto"))return N}return h(N)};return b(l)},[l]),u=o.useState({width:s.initialWidth,height:s.initialHeight}),f=u[0],E=f.width,d=f.height,m=u[1];pe(function(){if(l){var b=window.getComputedStyle(l);["relative","absolute","fixed"].includes(b.position)||(l.style.position="relative")}},[l]),o.useEffect(function(){if(l){var b=new ResizeObserver(function(){var h=l==null?void 0:l.getBoundingClientRect(),M=window.getComputedStyle(l);h&&m({width:h.width-parseInt(M.borderLeftWidth)-parseInt(M.borderRightWidth),height:h.height-parseInt(M.borderTopWidth)-parseInt(M.borderBottomWidth)})});return b.observe(l),function(){b.unobserve(l)}}},[l]);var _=o.useState(!0),x=_[0],y=_[1];return o.useEffect(function(){if(!(!l||!s.useIntersectionObserver)){var b=new IntersectionObserver(function(h){for(var M=St(h),N;!(N=M()).done;){var B=N.value;B.isIntersecting?y(!0):y(!1)}},{root:S,rootMargin:s.intersectionObserverRootMargin});return b.observe(l),function(){b.unobserve(l)}}},[l,S,s.intersectionObserverRootMargin,s.useIntersectionObserver]),o.createElement("div",I({ref:v},i,{className:"ReactChart "+(n||""),style:I({fontFamily:"sans-serif"},a,{position:"absolute",width:E,height:d})}),s.useIntersectionObserver&&!x?null:o.createElement(Lr,{options:s,width:E,height:d}))}function Lr(e){var t,n,r=e.options,a=e.width,i=e.height;if(!r.primaryAxis)throw new Error("A primaryAxis is required");if(!r.secondaryAxes.length)throw new Error("At least one secondaryAxis is required");var s=o.useMemo(function(){var g=tt(r.primaryAxis,r.data),w=rt(r.primaryAxis,g);return I({position:"bottom"},w)},[r.data,r.primaryAxis]),c=o.useMemo(function(){return r.secondaryAxes.map(function(g,w){var R=tt(g,r.data),V=rt(g,R);return V.elementType||(s.scaleType==="band"?V.elementType="bar":V.stacked&&(V.elementType="area")),typeof V.stacked>"u"&&V.elementType&&["area"].includes(V.elementType)&&(V.stacked=!0),I({position:w?"right":"left"},V)})},[r.data,r.secondaryAxes,s]),p=o.useMemo(function(){var g,w,R=Mr((g=r)==null?void 0:g.tooltip);return R.groupingMode=(w=R.groupingMode)!=null?w:function(){return r.interactionMode==="closest"?"single":"primary"}(),R},[r.interactionMode,(t=r)==null?void 0:t.tooltip]);r=I({},r,{tooltip:p});var v=o.useRef(null),l=be(I({},r,{tooltip:p})),S=o.useState({left:{},right:{},top:{},bottom:{}}),u=S[0],f=o.useState(!1),E=f[0],d=o.useState(null),m=d[0],_=o.useMemo(function(){var g,w,R,V,j={left:typeof r.padding=="object"?(g=r.padding.left)!=null?g:ve:r.padding,right:typeof r.padding=="object"?(w=r.padding.right)!=null?w:ve:r.padding,bottom:typeof r.padding=="object"?(R=r.padding.bottom)!=null?R:ve:r.padding,top:typeof r.padding=="object"?(V=r.padding.top)!=null?V:ve:r.padding},P=j.left+Math.max(H(Object.values(u.left),function(K){return K.width}),H(Object.values(u.top),function(K){return K.paddingLeft}),H(Object.values(u.bottom),function(K){return K.paddingLeft})),C=j.top+Math.max(H(Object.values(u.top),function(K){return K.height}),H(Object.values(u.left),function(K){return K.paddingTop}),H(Object.values(u.right),function(K){return K.paddingTop})),T=j.right+Math.max(H(Object.values(u.right),function(K){return K.width}),H(Object.values(u.top),function(K){return K.paddingRight}),H(Object.values(u.bottom),function(K){return K.paddingRight})),G=j.bottom+Math.max(H(Object.values(u.bottom),function(K){return K.height}),H(Object.values(u.left),function(K){return K.paddingBottom}),H(Object.values(u.right),function(K){return K.paddingBottom})),Y=Math.max(0,a-P-T),z=Math.max(0,i-C-G);return{left:P,top:C,right:T,bottom:G,width:Y,height:z}},[r.padding,u.left,u.top,u.bottom,u.right,a,i]),x=o.useMemo(function(){for(var g=[],w={},R=0;R<r.data.length;R++){var V,j,P,C=r.data[R],T=(V=C.id)!=null?V:R+"",G=(j=C.label)!=null?j:"Series "+(R+1),Y=C.secondaryAxisId,z=C.data,K=[];w[""+Y]=(P=w[""+Y])!=null?P:0;var re=w[""+Y];w[""+Y]++;for(var q=0;q<z.length;q++){var ae=z[q];K[q]={originalSeries:C,seriesIndex:R,seriesIndexPerAxis:re,seriesId:T,seriesLabel:G,secondaryAxisId:Y,index:q,originalDatum:ae}}g[R]={originalSeries:C,index:R,id:T,label:G,indexPerAxis:re,secondaryAxisId:Y,datums:K}}return g},[r.data]),y=o.useMemo(function(){return x.map(function(g){return g.datums}).flat(2)},[x]),b=o.useMemo(function(){return qe(!0,s,x,y,_,a,i)},[y,_,i,s,x,a]),h=o.useMemo(function(){return c.map(function(g){return qe(!1,g,x,y,_,a,i)})},[y,_,i,c,x,a]),M=o.useMemo(function(){if(!E)return[new Map,new Map];var g=new Map,w=new Map,R=h.every(function(C){return C.elementType==="bar"&&!C.stacked}),V=function(T){if(R){var G=h.find(function(Y){return Y.id===T.secondaryAxisId});if(G.elementType==="bar"&&!G.stacked)return Ve(T,b,G)}return T.primaryValue},j=function(T){return""+V(T)},P=function(T){return""+T.primaryValue};return r.interactionMode==="closest"&&(j=function(T){return V(T)+"_"+T.secondaryValue}),p.groupingMode==="single"?P=function(T){return T.primaryValue+"_"+T.secondaryValue}:p.groupingMode==="secondary"?P=function(T){return""+T.secondaryValue}:p.groupingMode==="series"&&(P=function(T){return""+T.seriesIndex}),y.forEach(function(C){var T=j(C),G=P(C);g.has(T)||g.set(T,[]),w.has(G)||w.set(G,[]),g.get(T).push(C),w.get(G).push(C)}),g.forEach(function(C,T){g.set(T,nt(C,h))}),w.forEach(function(C,T){w.set(T,nt(C,h))}),y.forEach(function(C){var T=j(C),G=P(C);C.interactiveGroup=g.get(T),C.tooltipGroup=w.get(G)}),[g,w]},[E,y,r.interactionMode,b,h,p.groupingMode]),N=M[0],B=M[1],L=o.useCallback(function(g,w){var R,V,j,P={color:l().defaultColors[g.index%l().defaultColors.length]},C=Xt(g,w),T=(R=(V=(j=l()).getSeriesStyle)==null?void 0:V.call(j,g,C))!=null?R:{};return g.style=Re(T,P),g.style},[l]),A=o.useCallback(function(g,w){var R,V,j,P,C=I({},(R=x[g.seriesIndex])==null?void 0:R.style,{color:l().defaultColors[g.seriesIndex%l().defaultColors.length]}),T=Yt(g,w),G=(V=(j=(P=l()).getDatumStyle)==null?void 0:j.call(P,g,T))!=null?V:{};return g.style=Re(G,C),g.style},[l,x]),$=o.useMemo(function(){var g=[].concat(x).reverse();return l().getSeriesOrder(g)},[l,x]);pe(function(){v.current&&v.current.parentElement&&!v.current.parentElement.style.position&&(v.current.parentElement.style.position="relative")});var k={getOptions:l,gridDimensions:_,primaryAxis:b,secondaryAxes:h,series:x,orderedSeries:$,datumsByInteractionGroup:N,datumsByTooltipGroup:B,width:a,height:i,getSeriesStatusStyle:L,getDatumStatusStyle:A,axisDimensionsState:S,focusedDatumState:d,svgRef:v,isInteractingState:f},D=o.useMemo(function(){return kt(Dt($,function(g){return g.secondaryAxisId}),function(g){var w=g[0];return h.findIndex(function(R){return R.id===w})})},[$,h]),O=function(){return{primaryAxis:b,secondaryAxes:h,seriesByAxisId:D}},W=o.useCallback(function(){return{primaryAxis:b,secondaryAxes:h,seriesByAxisId:D}},[b,h,D]);r.memoizeSeries&&(O=W);var F=o.useMemo(function(){var g=O(),w=g.primaryAxis,R=g.secondaryAxes,V=g.seriesByAxisId;return V.map(function(j){var P=j[0],C=j[1],T=R.find(function(z){return z.id===P});if(!T)return null;var G=T.elementType,Y=function(){if(G==="line"||G==="bubble"||G==="area")return tr;if(G==="bar")return qt;throw new Error("Invalid elementType")}();return w.isInvalid||T.isInvalid?null:o.createElement(Y,{key:P??"__default__",primaryAxis:w,secondaryAxis:T,series:C})})},[O]);return o.createElement(Ht,{value:be(k)},o.createElement("div",null,o.createElement("svg",{ref:v,style:{width:a,height:i,overflow:r.brush?"hidden":"visible"},onClick:function(w){return r.onClickDatum==null?void 0:r.onClickDatum(m,w)},onMouseEnter:function(){f[1](!0)},onMouseLeave:function(){f[1](!1)}},o.createElement("g",{className:"axes"},[b].concat(h).map(function(g){return o.createElement(dr,I({key:[g.position,g.id].join("")},g))})),o.createElement("g",{className:"Series",style:{pointerEvents:"none"}},F),o.createElement(Dr,null),(n=r.renderSVG==null?void 0:r.renderSVG())!=null?n:null),o.createElement(hr,null),o.createElement(kr,null)))}function tt(e,t){var n;return t.some(function(r){return r.data.some(function(a){var i=e.getValue(a);if(i!==null&&typeof i<"u")return n=i,!0})}),n}function rt(e,t){var n=e.scaleType;if(!e.scaleType)if(typeof t=="number")n="linear";else if(typeof(t==null?void 0:t.getMonth)=="function")n="time";else if(typeof t=="string"||typeof t=="boolean")n="band";else throw new Error("Invalid scale type: Unable to infer type from data");return I({},e,{scaleType:n})}function nt(e,t){if(t.every(function(r){return r.stacked})){var n=t.some(function(r){return r.invert})&&t.some(function(r){return!r.invert});if(!n)return e}return[].concat(e).sort(function(r,a){var i,s,c,p,v=t.find(function(f){return f.id===r.secondaryAxisId}),l=t.find(function(f){return f.id===a.secondaryAxisId}),S=(i=v==null?void 0:v.scale(v.stacked?(s=r.stackData)==null?void 0:s[1]:r.secondaryValue))!=null?i:NaN,u=(c=l==null?void 0:l.scale(l.stacked?(p=a.stackData)==null?void 0:p[1]:a.secondaryValue))!=null?c:NaN;return S>u?1:S<u?-1:0})}export{Yr as C};
